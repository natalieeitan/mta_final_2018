<html lang="he">
<head>
    <meta charset="utf-8"/>
    <title>דף ההרשמה לאתר</title>
    <link rel="stylesheet" type="text/css" href="/client/css/register.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

</head>
<body dir="rtl" onload="getUrlParam('supplier')">
<div class="layout-container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <a class="navbar-brand" href="#">הרשמה לאתר</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

    </nav>

    <div class="container">
        <h2>הרשמה לאתר</h2>

        <form action="/user" method="post" dir="rtl">
            <ul class="errorMessages"></ul>

            <div class="form-group row">
                <label>שם פרטי:</label>
                <input type="text" class="form-control" name="firstName" placeholder="שם פרטי">
            </div>
            <div class="form-group row">
                <label>שם משפחה:</label>
                <input type="text" class="form-control" name="lastName" placeholder="שם משפחה">
            </div>
            <div class="form-group row">
                <label>בחר סיסמה:</label>
                <input type="password" class="form-control" name="userPass"
                       placeholder="בחר סיסמה טובה שאף אחד לא יגלה">
            </div>
            <div class="form-group row">
                <label>דוא"ל:</label>
                <input type="email" class="form-control" name="userPass" placeholder="name@domain.com">
            </div>

            <input name="action_signup" hidden>
            <input name="isSupplier" id="isSupplier" hidden>

            <br/><br/>
            <button id="signInBtn" type="submit" class="btn btn-outline-primary" onclick="getToSignInPage()">יש לי
                משתמש
            </button>
            <button type="submit" class="btn btn-primary">הרשמה</button>


        </form>
    </div>

</div>

<script>
    var createAllErrors = function () {
        var form = $(this),
            errorList = $("ul.errorMessages", form);

        var showAllErrorMessages = function () {
            errorList.empty();

            // Find all invalid fields within the form.
            var invalidFields = form.find(":invalid").each(function (index, node) {

                // Find the field's corresponding label
                var label = $("label[for=" + node.id + "] "),
                    // Opera incorrectly does not fill the validationMessage property.
                    message = node.validationMessage || 'Invalid value.';

                errorList
                    .show()
                    .append("<li><span>" + label.html() + "</span> " + message + "</li>");
            });
        };

        // Support Safari
        form.on("submit", function (event) {
            if (this.checkValidity && !this.checkValidity()) {
                $(this).find(":invalid").first().focus();
                event.preventDefault();
            }
        });

        $("input[type=submit], button:not([type=button])", form)
            .on("click", showAllErrorMessages);

        $("input", form).on("keypress", function (event) {
            var type = $(this).attr("type");
            if (/date|email|month|number|search|tel|text|time|url|week/.test(type)
                && event.keyCode == 13) {
                showAllErrorMessages();
            }
        });
    };
    $("form").each(createAllErrors);
</script>
<script type="text/javascript">
    function getUrlParam(name) {
        url = location.href;
        name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
        var regexS = "[\\?&]" + name + "=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec(url);
        document.getElementById("isSupplier").value = results[1];
    }

    function getToSignInPage() {
        location.href = "/client/html/signIn.html?supplier=" + document.getElementById("isSupplier").value;
    }
</script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
</body>
</html>